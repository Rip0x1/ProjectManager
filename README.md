# Project Management System

Учебный проект на русском языке: ASP.NET Core Web API + WPF (MaterialDesignInXaml) для управления проектами, задачами, пользователями и комментариями.

## Состав репозитория
- **ProjectManagementSystem.API** — Web API на .NET 8 (EF Core)
- **ProjectManagementSystem.Database** — сущности и DbContext
- **ProjectManagerApp** — WPF‑клиент на .NET 8 с Material Design

## Требования
- **.NET SDK** 8.0+
- **Windows 10/11** (для WPF‑клиента)
- **SQL Server** (локальный или SQL Server Express)

## Быстрый старт

### 1) Запуск API
1. Откройте решение в Visual Studio или через `dotnet` CLI
2. Перейдите в каталог `ProjectManagementSystem.API`
3. Выполните миграции: `dotnet ef database update`
4. Запустите API: `dotnet run`
5. API будет доступен по адресу: `https://localhost:7260`

**Основные эндпоинты**:
- `api/auth/login`, `api/auth/register` — авторизация
- `api/users` — управление пользователями
- `api/projects` — управление проектами
- `api/tasks` — управление задачами
- `api/comments` — комментарии к задачам
- `api/statistics` — статистика системы

### 2) Запуск WPF‑клиента
1. Убедитесь, что API запущен
2. Перейдите в каталог `ProjectManagerApp`
3. Запустите клиент: `dotnet run`
4. В окне входа доступны:
   - Вход (email/пароль)
   - Регистрация с возвратом на вход
   - Показать/скрыть пароль (иконка глаза)
   - Подсказки: **зелёная** — успех, **красная** — ошибка

## Функциональность

### Авторизация и роли
- **Регистрация** новых пользователей
- **Вход** в систему
- **Роли**: Пользователь, Менеджер, Администратор
- **Демо-пользователь** для тестирования

### Управление проектами
- **Просмотр** всех проектов с фильтрацией по статусу
- **Создание** новых проектов
- **Редактирование** существующих проектов
- **Удаление** проектов
- **Управление участниками** проекта
- **Статистика** проекта (участники, задачи, комментарии)

### Управление задачами
- **Просмотр** задач с фильтрацией по статусу и приоритету
- **Создание** новых задач
- **Редактирование** существующих задач
- **Удаление** задач
- **Назначение** исполнителей
- **Комментарии** к задачам

### Управление пользователями
- **Просмотр** всех пользователей с фильтрацией по роли
- **Создание** новых пользователей
- **Редактирование** существующих пользователей
- **Удаление** пользователей
- **Управление ролями**

### Мои проекты
- **Просмотр** проектов, в которых участвует пользователь
- **Комментарии** к проектам
- **Задачи** проекта
- **Настройки** проекта

### Комментарии
- **Добавление** комментариев к задачам и проектам
- **Просмотр** всех комментариев
- **Удаление** комментариев (согласно правам доступа)
- **Поиск** по комментариям
- **Пагинация** для больших списков

## Архитектура

### Клиент (WPF)
- **DI**: `Microsoft.Extensions.Hosting`
- **MVVM**: ViewModels с `CommunityToolkit.Mvvm`
- **Material Design**: `MaterialDesignInXamlToolkit`
- **Сервисы**:
  - `ApiClient` — HTTP-клиент для API
  - `AuthService` — управление авторизацией
  - `NavigationService` — навигация между окнами
  - `NotificationService` — уведомления
  - `TasksService`, `ProjectsService`, `UsersService` — бизнес-логика

### API (ASP.NET Core)
- **Entity Framework Core** для работы с базой данных
- **Миграции** для управления схемой БД
- **JWT** для авторизации
- **RESTful API** с пагинацией и фильтрацией
- **Валидация** входных данных

### База данных
- **SQL Server** с Entity Framework Core
- **Миграции** для версионирования схемы
- **Связи** между сущностями (проекты, задачи, пользователи, комментарии)

## Конфигурация

### API
- **Connection String**: `appsettings.json`
- **CORS**: настроен для локальной разработки
- **HTTPS**: включен по умолчанию

### Клиент
- **BaseUrl**: `ProjectManagerApp/Services/ApiClient.cs`
- **Timeout**: 5 минут для больших операций
- **SSL**: отключена строгая проверка для локального HTTPS

## Особенности

### Безопасность
- **Хеширование паролей** с помощью `PasswordHasher`
- **Роли и права доступа** для разных операций
- **Валидация** всех входных данных

### Производительность
- **Пагинация** для больших списков
- **Поиск** с фильтрацией
- **Кэширование** статистики
- **Оптимизированные запросы** к БД

### UX/UI
- **Material Design** для современного интерфейса
- **Уведомления** о результатах операций
- **Загрузочные индикаторы** для долгих операций
- **Адаптивный дизайн** для разных размеров экрана

## Разработка

### Структура проекта
```
ProjectManagementSystem/
├── ProjectManagementSystem.API/          # Web API
│   ├── Controllers/                       # API контроллеры
│   ├── Models/DTOs/                       # DTO для API
│   └── Program.cs                         # Конфигурация API
├── ProjectManagementSystem.Database/      # База данных
│   ├── Entities/                          # Сущности БД
│   ├── Data/                              # DbContext
│   └── Migrations/                        # Миграции
└── ProjectManagerApp/                     # WPF клиент
    ├── Views/                             # XAML представления
    ├── ViewModels/                        # ViewModels
    ├── Services/                          # Бизнес-логика
    ├── Models/                            # Модели данных
    └── Converters/                        # Конвертеры для UI
```

### Запуск в режиме разработки
1. **API**: `dotnet run --project ProjectManagementSystem.API`
2. **Клиент**: `dotnet run --project ProjectManagerApp`

### Миграции
```bash
# Создание миграции
dotnet ef migrations add MigrationName --project ProjectManagementSystem.Database --startup-project ProjectManagementSystem.API

# Применение миграций
dotnet ef database update --project ProjectManagementSystem.Database --startup-project ProjectManagementSystem.API
```

## Лицензия
См. `LICENSE.txt`.